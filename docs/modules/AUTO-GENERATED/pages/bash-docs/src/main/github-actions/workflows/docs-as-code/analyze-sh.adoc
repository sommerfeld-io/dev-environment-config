= analyze.sh

// +-----------------------------------------------+
// |                                               |
// |    DO NOT EDIT HERE !!!!!                     |
// |                                               |
// |    File is auto-generated by pipline.         |
// |    Contents are based on bash script docs.    |
// |                                               |
// +-----------------------------------------------+


Analyze this projects source code by running Qodana.

== Overview

This script analyzes this projects source code and asciidoc by running
link:https://www.jetbrains.com/de-de/qodana[Qodana] The script is downloaded by the
`docs-as-code.yml` workflow and executed as part of the workflow.

The base iamge for the custom Docker image which is built during the workflow execution is
link:https://hub.docker.com/r/jetbrains/qodana[`jetbrains/qodana`].

=== Script Arguments

* _$1_ (string): Use `--save-report` to run in pipelines. When omitting this option a webserver starts at link:http://localhost:8080[localhost:8080].

=== Script Example

.Run in Github Actions pipeline:
[source, bash]

----
qodana-analysis:
runs-on: ubuntu-latest
if: github.ref == 'refs/heads/main'
permissions:
security-events: write
steps:
- name: Checkout code
uses: actions/checkout@v3
- name: Download dependencies
run: |
files=(
"analyze.sh"
"Dockerfile"
"qodana.yaml"
)
for f in "${files[@]}"
do
echo "[INFO] Download $f"
curl "https://raw.githubusercontent.com/sommerfeld-io/dev-environment-config/main/src/main/github-actions/workflows/docs-as-code/$f" --output "$f"
done
shell: bash
- name: Run Qodana
run: |
chmod +x analyze.sh
./analyze.sh --save-report
shell: bash
- name: Upload qodana result to Github Code Scanning
uses: github/codeql-action/upload-sarif@v2
with:
sarif_file: target/qodana/report/results/qodana.sarif.json
----

== Index

* <<_log_error,LOG_ERROR>>
* <<_log_info,LOG_INFO>>
* <<_log_header,LOG_HEADER>>

=== LOG_ERROR

Log message with log level = ERROR.

==== Arguments

* *...* (String): The line to print.

=== LOG_INFO

Log message with log level = INFO.

==== Arguments

* *...* (String): The line to print.

=== LOG_HEADER

Print log output in a header-style.

==== Arguments

* *...* (String): The line to print.
